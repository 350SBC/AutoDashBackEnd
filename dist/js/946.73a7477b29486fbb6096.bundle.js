(()=>{var e={562:function(e,t,n){var i,o;o="undefined"!=typeof window?window:void 0!==n.g?n.g:this,i=function(){return function(e,t){var n=function(i,o,r){var s,a,c={close:function(){}},y=this,d=0,f=-1,u=!1,p=!1,b=Object.assign({},n.defaultOptions,"function"==typeof r?{shouldReconnect:r}:r);if("number"!=typeof b.timeout)throw new Error("timeout must be the number of milliseconds to timeout a connection attempt");if("function"!=typeof b.shouldReconnect)throw new Error("shouldReconnect must be a function that returns the number of milliseconds to wait for a reconnect attempt, or null or undefined to not reconnect.");function E(){a&&(clearTimeout(a),a=null)}["bufferedAmount","url","readyState","protocol","extensions"].forEach((function(e){Object.defineProperty(y,e,{get:function(){return c[e]}})}));var l=function(e){u&&(E(),h(e))},T=function(){u=!0,c.close(1e3)},O=!1;function R(){O&&(e.removeEventListener("online",l),e.removeEventListener("offline",T),O=!1)}function h(e){if(!b.shouldReconnect.handle1000&&1e3===e.code||p)d=0;else if(!1!==t.onLine){var n=b.shouldReconnect(e,y);"number"==typeof n&&(a=setTimeout(_,n))}else u=!0}function _(){var t="function"==typeof i?i(y):i;a=null,(c=new WebSocket(t,o||void 0)).binaryType=y.binaryType,d++,y.dispatchEvent(Object.assign(new CustomEvent("connecting"),{attempts:d,reconnects:f})),s=setTimeout((function(){s=null,R(),y.dispatchEvent(Object.assign(new CustomEvent("timeout"),{attempts:d,reconnects:f}))}),b.timeout),["open","close","message","error"].forEach((function(e){c.addEventListener(e,(function(t){y.dispatchEvent(t);var n=y["on"+e];if("function"==typeof n)return n.apply(y,arguments)}))})),b.ignoreConnectivityEvents||O||(e.addEventListener("online",l),e.addEventListener("offline",T),O=!0)}y.send=function(){return c.send.apply(c,arguments)},y.close=function(e,t){return"number"!=typeof e&&(t=e,e=1e3),E(),u=!1,p=!0,R(),c.close(e,t)},y.open=function(){c.readyState!==WebSocket.OPEN&&c.readyState!==WebSocket.CONNECTING&&(E(),u=!1,p=!1,_())},Object.defineProperty(y,"listeners",{value:{open:[function(e){s&&(clearTimeout(s),s=null),e.reconnects=++f,e.attempts=d,d=0,u=!1}],close:[h]}}),Object.defineProperty(y,"attempts",{get:function(){return d},enumerable:!0}),Object.defineProperty(y,"reconnects",{get:function(){return f},enumerable:!0}),b.automaticOpen&&_()};return n.defaultOptions={timeout:4e3,shouldReconnect:function(e,t){if(1008!==e.code&&1011!==e.code)return[0,3e3,1e4][t.attempts]},ignoreConnectivityEvents:!1,automaticOpen:!0},n.prototype.binaryType="blob",n.prototype.addEventListener=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},n.prototype.removeEventListener=function(e,t){if(e in this.listeners)for(var n=this.listeners[e],i=0,o=n.length;i<o;i++)if(n[i]===t)return void n.splice(i,1)},n.prototype.dispatchEvent=function(e){if(e.type in this.listeners)for(var t=this.listeners[e.type],n=0,i=t.length;n<i;n++)t[n].call(this,e)},n}(o,navigator)}.call(t,n,t,e),void 0===i||(e.exports=i)}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(562),t=n.n(e);const i=class{constructor(e,t,n,i){const o=new Uint8Array(e,t,n);this.frontOffset=i,this.buffer=new Uint8Array([...o.subarray(this.frontOffset),...o.subarray(0,this.frontOffset)])}get front(){return this.buffer[this.frontOffset]}};let o=0;const r=(e=!1)=>(e&&(o=0),o++),s={PEDAL_POSITION:{id:r(),byteType:1},RPM:{id:r(),byteType:2},FUEL_PRESSURE:{id:r(),byteType:2},SPEEDO:{id:r(),byteType:2},INJECTOR_PULSEWIDTH:{id:r(),byteType:2},FUEL_FLOW:{id:r(),byteType:2},CLOSED_LOOP_STATUS:{id:r(),byteType:1},DUTY_CYCLE:{id:r(),byteType:1},AFR_LEFT:{id:r(),byteType:3},CLOSED_LOOP_COMP:{id:r(),byteType:2},AFR_RIGHT:{id:r(),byteType:3},TARGET_AFR:{id:r(),byteType:3},AFR_AVERAGE:{id:r(),byteType:3},IGNITION_TIMING:{id:r(),byteType:3},MAP:{id:r(),byteType:2},KNOCK_RETARD:{id:r(),byteType:2},MAT:{id:r(),byteType:2},TPS:{id:r(),byteType:1},BAR_PRESSURE:{id:r(),byteType:3},CTS:{id:r(),byteType:2},OIL_PRESSURE:{id:r(),byteType:2},BATT_VOLTAGE:{id:r(),byteType:3},ODOMETER:{id:r(),byteType:2},TRIP_ODOMETER:{id:r(),byteType:2},GPS_SPEEED:{id:r(),byteType:2},WARNINGS:{id:r(),byteType:4},FUEL_LEVEL:{id:r(),byteType:1},CURRENT_MPG:{id:r(),byteType:3},AVERAGE_MPG:{id:r(),byteType:3},AVERAGE_MPG_POINTS:{id:r(),byteType:5},AVERAGE_MPG_POINT_INDEX:{id:r(),byteType:1},LOW_LIGHT_DETECTED:{id:r(),byteType:1},PRESSURE_TYPE:{id:r(),byteType:1},TEMP_TYPE:{id:r(),byteType:1},SOME_NEW_VALUE:{id:r(),byteType:8}},a={BATT_VOLTAGE:r(!0),OIL_PRESSURE:r(),LOW_FUEL:r(),ENGINE_TEMPERATURE:r(),ECU_COMM:r(),GPS_NOT_ACQUIRED:r(),GPS_ERROR:r(),COMM_ERROR:r()};let c=0;Object.keys(s).forEach((e=>{const t=s[e];switch(t.byteOffset=c,t.byteType){case 1:case 4:case 6:c+=1;break;case 2:case 7:c+=2;break;case 3:case 8:c+=4;break;case 5:c+=100;break;default:throw new Error(`Unknown byteType: ${t.byteType}`)}})),Object.freeze(s);const y=(()=>{let e=[],t=[];for(const[n,o]of Object.entries(s))switch(e[o.id]=0,o.byteType){case 1:t[o.id]=e=>e.getInt8(o.byteOffset);break;case 2:t[o.id]=e=>e.getInt16(o.byteOffset);break;case 6:case 4:t[o.id]=e=>e.getUint8(o.byteOffset);break;case 7:t[o.id]=e=>e.getUint16(o.byteOffset);break;case 8:t[o.id]=e=>e.getUint32(o.byteOffset);break;case 3:t[o.id]=e=>e.getFloat32(o.byteOffset);break;case 5:t[o.id]=e=>new i(e.buffer,o.byteOffset,100,e.getInt8(o.byteOffset+100));break;default:throw new Error(`Unknown type ${o.byteType}`)}return{get:t=>e[t.id],getWarning:t=>!!(e[s.WARNINGS.id]&128>>t%8),set:(t,n)=>{e[t.id]=n},setWarning:(t,n)=>{if(t>7)throw"I screwed up: error - bit field key cannot be > 7";e[s.WARNINGS.id]=n?e[s.WARNINGS.id]|128>>t%8:e[s.WARNINGS.id]&~(128>>t%8)},deserialize:n=>{for(const[i,o]of Object.entries(s))e[o.id]=t[o.id](n)},data:e}})();t().prototype.binaryType="arraybuffer";let d=null;onmessage=e=>{switch(e.data.msg){case"start":d=(()=>{y.setWarning(a.COMM_ERROR,!0);let e=new(t())("ws://localhost:3333",null,{timeout:3e4,shouldReconnect:()=>0,ignoreConnectivityEvents:!1});return e.addEventListener("open",(function(e){y.setWarning(a.COMM_ERROR,!1)})),e.addEventListener("close",(e=>{y.setWarning(a.COMM_ERROR,!0)})),e.addEventListener("error",(e=>{y.setWarning(a.COMM_ERROR,!0)})),e.addEventListener("message",(e=>{(e=>{try{y.deserialize(e)}catch(e){console.error(e)}})(new DataView(e.data))})),e})();break;case"process_update_data":postMessage({msg:"update_data_ready",updateData:y.data})}}})()})();